<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ragtag.X10.model.dao.QuestionDao">
    <!-- 퀴즈 생성 -->
    <insert id="createQuestion" parameterType="Question" useGeneratedKeys="true" keyProperty="questionId">
        <![CDATA[
            INSERT INTO Question (workbookId, questionQ, questionA, questionType,
                                 questionExplain, questionDifficulty, questionMaker,
                                 questionSave, questionImg)
            VALUES (#{workbookId}, #{questionQ}, #{questionA}, #{questionType},
                    #{questionExplain}, #{questionDifficulty}, #{questionMaker},
                    #{questionSave}, #{questionImg});
        ]]>
    </insert>

    <!-- 퀴즈 상세정보 조회 -->
    <select id="readQuestionById" parameterType="int" resultType="Question">
        SELECT * FROM Question WHERE questionId = #{questionId}
    </select>

    <!-- 문제집 내 퀴즈 조회 -->
    <select id="readAllQuestionsByWorkbookId" parameterType="int" resultType="Question">
        SELECT * FROM Question WHERE workbookId = #{workbookId}
    </select>

    <!-- 퀴즈 수정 -->
    <update id="updateQuestion" parameterType="Question">
        <![CDATA[
            UPDATE Question
            SET questionQ = #{questionQ}, questionA = #{questionA},
                questionType = #{questionType}, questionExplain = #{questionExplain},
                questionDifficulty = #{questionDifficulty}, questionMaker = #{questionMaker},
                questionSave = #{questionSave}, questionImg = #{questionImg}
            WHERE questionId = #{questionId} AND workbookId = #{workbookId};
        ]]>
    </update>

    <!-- 퀴즈 삭제 -->
    <delete id="deleteQuestion" parameterType="int">
        DELETE FROM Question WHERE questionId = #{questionId}
    </delete>

</mapper>